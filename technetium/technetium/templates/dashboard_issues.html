{% extends "includes/base.html" %}
{% load url from future %}

{% block content %}
<div class="col-lg-12">
  <h2><span class="glyphicon glyphicon-saved space-right"></span>Issue Tracker</h2>

  {% if not issues_list %}
    {% include 'includes/tutorials/issues-tutorial.html' %}

  {% else %}
  {% for repo in issues_list %}
  <hr>
  <h3>{{ repo.repo_meta.repo_name }}
    <span class="pull-right">
      <button class="btn btn-default btn-sm">Post New Issue</button>
        <span class="space-right"></span>
      <button class="btn btn-default btn-sm">Show More</button>
    </span>
  </h3>

    {% if repo.issues %}
    <div class="table-responsive">
    <table class="table table-hover table-striped tablesorter">
      <thead>
        <tr>
          <th class="header">Assignee</th>
          <th class="header">Issue Title <i class="icon-sort"></i></th>
          <th class="header">Type
            {% include "includes/filters/filter-type.html" %}
          </th>

          <th class="header">Created
            {% include "includes/filters/filter-created.html" %}
          </th>

          <th class="header">Status
            {% include "includes/filters/filter-status.html" %}
          </th>

        </tr>
      </thead>
      <tbody>
      {% for issue in repo.issues %}
        <tr>

          {% if issue.assignee %}
            <td><img class="assignee-avatar" src="{{ issue.assignee_avatar }}">
              {{ issue.assignee }}
            </td>
          {% else %}
            <td>None</td>
          {% endif %}

          <td><a href="{{ issue.issues_url }}">{{ issue.title }}</a></td>
          <td>{{ issue.type }}</td>
          <td>{{ issue.created }}</td>
          <td>{{ issue.status }}</td>
        </tr>
      {% endfor %}

    {% else %}
      <h4>No issues reported yet.</h4>

    {% endif %}
    </tbody>
  </table>
  {% endfor %}

  {% endif %}
  </div>
</div>

{% endblock %}
