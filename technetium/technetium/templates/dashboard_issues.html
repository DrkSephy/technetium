{% extends "includes/base.html" %}
{% load url from future %}


{% block content %}
<div class="col-lg-12">
  <h2>Issue Tracker</h2>
  <div class="table-responsive">
    <table class="table table-hover table-striped tablesorter">
      <thead>
        <tr>
          <th class="header">Title <i class="icon-sort"></i></th>
          <th class="header">Repository <i class="icon-sort"></i></th>
          <th class="header">Assignee <i class="icon-sort"></i></th>
          <th class="header">Type
                <select id="Type" onchange="getIssues()">
                  <option value="">no filter</option>
                  <option value="bug" 
{%  if filterNameValues.Type and filterNameValues.Type == 'bug'  %}
    {{ 'selected' }}
{%  endif  %}
                    >bug</option>
                  <option value="enhancement"
{%  if filterNameValues.Type and filterNameValues.Type == 'enhancement'  %}
    {{ 'selected' }}
{%  endif  %}
                    >enhancement</option>
                  <option value="proposal"
{%  if filterNameValues.Type and filterNameValues.Type == 'proposal'  %}
    {{ 'selected' }}
{%  endif  %}
                     >proposal</option>
                  <option value="task"
{%  if filterNameValues.Type and filterNameValues.Type == 'task'  %}
    {{ 'selected' }}
{%  endif  %}
                    >task</option>
                </select>  
            <i class="icon-sort"></i></th>
          <th class="header">Priority
                <select id="Priority" onchange="getIssues()">
                  <option value="">no filter</option>
                  <option value="major" 
{%  if filterNameValues.Priority and filterNameValues.Priority == 'major'  %}
    {{ 'selected' }}
{%  endif  %}
                    >major</option>
                  <option value="trivial"
{%  if filterNameValues.Priority and filterNameValues.Priority == 'trivial'  %}
    {{ 'selected' }}
{%  endif  %}
                    >trivial</option>
                  <option value="minor"
{%  if filterNameValues.Priority and filterNameValues.Priority == 'minor'  %}
    {{ 'selected' }}
{%  endif  %}
                     >minor</option>
                  <option value="critical"
{%  if filterNameValues.Priority and filterNameValues.Priority == 'critical'  %}
    {{ 'selected' }}
{%  endif  %}
                    >critical</option>
                  <option value="blocker"
{%  if filterNameValues.Priority and filterNameValues.Priority == 'blocker'  %}
    {{ 'selected' }}
{%  endif  %}
                    >blocker</option>
                </select>  
            <i class="icon-sort"></i></th>
          <th class="header">Created 
                <select id="Created" onchange="getIssues()">
                  <option value="">no filter</option>
                  <option value="today" 
{%  if filterNameValues.Created and filterNameValues.Created == 'today'  %}
    {{ 'selected' }}
{%  endif  %}
                    >today</option>
                  <option value="this_week"
{%  if filterNameValues.Created and filterNameValues.Created == 'this_week'  %}
    {{ 'selected' }}
{%  endif  %}
                    >this week</option>
                  <option value="last_week"
{%  if filterNameValues.Created and filterNameValues.Created == 'last_week'  %}
    {{ 'selected' }}
{%  endif  %}
                     >last week</option>
                  <option value="this_month"
{%  if filterNameValues.Created and filterNameValues.Created == 'this_month'  %}
    {{ 'selected' }}
{%  endif  %}
                    >this month</option>
                  <option value="last_month"
{%  if filterNameValues.Created and filterNameValues.Created == 'last_month'  %}
    {{ 'selected' }}
{%  endif  %}
                    >last month</option>
                  <option value="this_year"
{%  if filterNameValues.Created and filterNameValues.Created == 'this_year'  %}
    {{ 'selected' }}
{%  endif  %}
                    >this year</option>
                  <option value="last_year"
{%  if filterNameValues.Created and filterNameValues.Created == 'last_year'  %}
    {{ 'selected' }}
{%  endif  %}
                    >last year</option>
                </select>  
            <i class="icon-sort"></i></th>
          <th class="header">Status
                <select id="Status" onchange="getIssues()">
                  <option value="">no filter</option>
                  <option value="new" 
{%  if filterNameValues.Status and filterNameValues.Status == 'new'  %}
    {{ 'selected' }}
{%  endif  %}
                    >new</option>
                  <option value="open" 
{%  if filterNameValues.Status and filterNameValues.Status == 'open' %}
    {{ 'selected' }}
{%  endif  %}
                    >open</option>
                  <option value="resolved"
{%  if filterNameValues.Status and filterNameValues.Status == 'resolved'  %}
    {{ 'selected' }}
{%  endif  %}
                    >resolved</option>
                  <option value="duplicate"
{%  if filterNameValues.Status and filterNameValues.Status == 'duplicate'  %}
    {{ 'selected' }}
{%  endif  %}
                     >duplicate</option>
                  <option value="on_hold"
{%  if filterNameValues.Status and filterNameValues.Status == 'on_hold'  %}
    {{ 'selected' }}
{%  endif  %}
                    >on hold</option>
                  <option value="invalid"
{%  if filterNameValues.Status and filterNameValues.Status == 'invalid'  %}
    {{ 'selected' }}
{%  endif  %}
                    >invalid</option>
                  <option value="wontfix"
{%  if filterNameValues.Status and filterNameValues.Status == 'wontfix'  %}
    {{ 'selected' }}
{%  endif  %}
                    >wontfix</option>
                </select>  
            <i class="icon-sort"></i></th>
        </tr>
      </thead>
      <tbody>
    {% for issue in issues_json %}
      <tr>
        <td><a href="{{ issue.issues_url }}">{{ issue.title }}</a></td>
        <td>{{ issue.repository }}</td>
        <td>{{ issue.assignee }}</td>
        <td>{{ issue.type }}</td>
        <td>{{ issue.priority }}</td>
        <td>{{ issue.created }}</td>
        <td>{{ issue.status }}</td>
      </tr>
    {% endfor %}

    </tbody>
  </table>
  </div>
</div>


{% endblock %}
